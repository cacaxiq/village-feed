<?xml version="1.0" encoding="utf-8" ?>
<ContentPage
             x:Class="VillageApp.Views.FeedPage" 
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:toolkit="http://schemas.microsoft.com/dotnet/2022/maui/toolkit"
    xmlns:handlers="clr-namespace:VillageApp.Handlers"
    xmlns:viewmodel="clr-namespace:VillageApp.ViewModels"
    xmlns:models="clr-namespace:VillageApp.Models"
    xmlns:converters="clr-namespace:VillageApp.Converters"
             Title="Feed">
    <ContentPage.BindingContext>
        <viewmodel:FeedViewModel/>
    </ContentPage.BindingContext>
    <StackLayout >
        <SearchBar 
            Placeholder="Buscar posts"
            CancelButtonColor="Black"
            x:Name="searchBar">
            <SearchBar.Behaviors>
                <toolkit:EventToCommandBehavior
            Command = "{Binding SearchCommand}"
            EventArgsConverter="{converters:TextChangedEventArgsConverter}"
            EventName="TextChanged" />
            </SearchBar.Behaviors>
        </SearchBar>

        <CollectionView VerticalOptions="FillAndExpand" ItemsLayout="VerticalList" ItemsSource="{Binding Posts, Mode=OneWay}">
            
            <CollectionView.ItemTemplate>
                <DataTemplate x:DataType="models:Post">
                    <Frame Margin="0,0,0,10">
                        <StackLayout Spacing="5">
                            <Label Text="{Binding Title}"    Style="{StaticResource PostHeadline}">
                            </Label>
                            <Label Text="{Binding Content}"   Style="{StaticResource PostSubHeadline}">
                            </Label>
                        </StackLayout>
                    </Frame>
                </DataTemplate>
            </CollectionView.ItemTemplate>
        </CollectionView>
    </StackLayout>
</ContentPage>